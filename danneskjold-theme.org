#+TITLE: danneskjold-theme
#+AUTHOR: Dmitry Akatov
#+EMAIL: akatovda@yandex.com
#+CATEGORY: danneskjold-theme

* Colors
#+TBLNAME: Colors
| Name        | HEX     | Description                                        |
|-------------+---------+----------------------------------------------------|
| black       | #000000 | Background                                         |
| white       | #FFFFFF | Use it to achieve maximum contrast with background |
| yellow      | #FFDB45 |                                                    |
| orange      | #FF9009 |                                                    |
| red         | #E74C3C |                                                    |
| violet      | #9C91E4 |                                                    |
| blue        | #4CB5F5 |                                                    |
| cyan        | #66D9EF |                                                    |
| green       | #B6E63E |                                                    |
| green-sat   | #53D253 |                                                    |
|-------------+---------+----------------------------------------------------|
| magnolias   | #FAF9FF |                                                    |
| wisteria    | #B2A9ED |                                                    |
| amethyst    | #8B7FD7 |                                                    |
| frost       | #D0E1F9 |                                                    |
| ghost       | #F9FBFF |                                                    |
| periwinkle  | #D8D2FA |                                                    |
| cornflower  | #A4C2EB |                                                    |
| habr        | #789ED2 |                                                    |
| lemoncream  | #FFF5D1 |                                                    |
| snowy       | #FFFEF8 |                                                    |
| sand        | #FFEEAB |                                                    |
| lightgolden | #FFE688 |                                                    |
| almond      | #FFEED1 |                                                    |
| niveous     | #FFFCF8 |                                                    |
| navajo      | #FFE0AB |                                                    |
| macheese    | #FFD288 |                                                    |
| diredcl     | #749AF7 |                                                    |
|-------------+---------+----------------------------------------------------|
| comment     | #A4C2EB |                                                    |
| invisible   | #7B9ED2 |                                                    |
* Faces
#+TBLNAME: Faces
| ! | Name                               | Foreground | Background | Underline | Weight |
|---+------------------------------------+------------+------------+-----------+--------|
| # | default                            | white      | black      |           |        |
| # | fringe                             | invisible  | black      |           |        |
| # | region                             | black      | white      |           |        |
| # | menu                               | white      | black      |           |        |
| # | button                             | frost      |            | t         | normal |
| # | link                               | frost      |            | t         |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | show-paren-match                   | white      | black      |           |        |
| # | highlight                          | black      | invisible  | t         |        |
| # | mmm-default-submode-face           |            |            |           |        |
| # | header-line                        |            |            |           |        |
| # | js2-function-param                 |            |            |           |        |
| # | secondary-selection                |            |            |           |        |
| # | shr-link                           |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | font-lock-builtin-face             |            |            |           |        |
| # | font-lock-comment-delimiter-face   |            |            |           |        |
| # | font-lock-comment-face             |            |            |           |        |
| # | font-lock-constant-face            |            |            |           |        |
| # | font-lock-doc-face                 |            |            |           |        |
| # | font-lock-function-name-face       |            |            |           |        |
| # | font-lock-keyword-face             |            |            |           |        |
| # | font-lock-string-face              |            |            |           |        |
| # | font-lock-type-face                |            |            |           |        |
| # | font-lock-variable-name-face       |            |            |           |        |
| # | font-lock-warning-face             |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | mode-line                          |            |            |           |        |
| # | mode-line-buffer-id                |            |            |           |        |
| # | mode-line-inactive                 |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | compilation-column-number          |            |            |           |        |
| # | compilation-error                  |            |            |           |        |
| # | compilation-info                   |            |            |           |        |
| # | compilation-line-number            |            |            |           |        |
| # | compilation-warning                |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | line-number                        |            |            |           |        |
| # | line-number-current-line           |            |            |           |        |
| # | linum                              |            |            |           |        |
| # | linum-highlight-face               |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | widget-field                       |            |            |           |        |
| # | widget-button                      |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | bmkp-D-mark                        |            |            |           |        |
| # | bmkp-local-directory               |            |            |           |        |
| # | bmkp-no-local                      |            |            |           |        |
| # | bmkp-remote-file                   |            |            |           |        |
| # | bmkp-url                           |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | comint-highlight-input             |            |            |           |        |
| # | comint-highlight-prompt            |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | company-mouse                      |            |            |           |        |
| # | company-preview                    |            |            |           |        |
| # | company-preview-common             |            |            |           |        |
| # | company-scrollbar-bg               |            |            |           |        |
| # | company-scrollbar-fg               |            |            |           |        |
| # | company-tooltip                    |            |            |           |        |
| # | company-tooltip-common             |            |            |           |        |
| # | company-tooltip-selection          |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | diff-added                         |            |            |           |        |
| # | diff-context                       |            |            |           |        |
| # | diff-file-header                   |            |            |           |        |
| # | diff-header                        |            |            |           |        |
| # | diff-indicator-added               |            |            |           |        |
| # | diff-indicator-removed             |            |            |           |        |
| # | diff-refine-added                  |            |            |           |        |
| # | diff-refine-removed                |            |            |           |        |
| # | diff-removed                       |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | dired-directory                    |            |            |           |        |
| # | dired-filetype-common              |            |            |           |        |
| # | dired-filetype-execute             |            |            |           |        |
| # | dired-filetype-link                |            |            |           |        |
| # | dired-filetype-omit                |            |            |           |        |
| # | dired-filetype-plain               |            |            |           |        |
| # | dired-filetype-source              |            |            |           |        |
| # | dired-flagged                      |            |            |           |        |
| # | dired-git-face                     |            |            |           |        |
| # | dired-ignored                      |            |            |           |        |
| # | dired-marked                       |            |            |           |        |
| # | dired-rainbow-executable-unix-face |            |            |           |        |
| # | dired-subtree-depth-1-face         |            |            |           |        |
| # | dired-subtree-depth-2-face         |            |            |           |        |
| # | dired-subtree-depth-3-face         |            |            |           |        |
| # | dired-subtree-depth-4-face         |            |            |           |        |
| # | dired-subtree-depth-5-face         |            |            |           |        |
| # | dired-subtree-depth-6-face         |            |            |           |        |
| # | dired-subtree-depth-7-face         |            |            |           |        |
| # | dired-subtree-depth-8-face         |            |            |           |        |
| # | dired-subtree-depth-9-face         |            |            |           |        |
| # | diredp-compressed-file-suffix      |            |            |           |        |
| # | diredp-date-time                   |            |            |           |        |
| # | diredp-deletion                    |            |            |           |        |
| # | diredp-deletion-file-name          |            |            |           |        |
| # | diredp-dir-heading                 |            |            |           |        |
| # | diredp-dir-name                    |            |            |           |        |
| # | diredp-dir-priv                    |            |            |           |        |
| # | diredp-exec-priv                   |            |            |           |        |
| # | diredp-file-name                   |            |            |           |        |
| # | diredp-file-suffix                 |            |            |           |        |
| # | diredp-flag-mark                   |            |            |           |        |
| # | diredp-flag-mark-line              |            |            |           |        |
| # | diredp-ignored-file-name           |            |            |           |        |
| # | diredp-mode-line-flagged           |            |            |           |        |
| # | diredp-mode-line-marked            |            |            |           |        |
| # | diredp-no-priv                     |            |            |           |        |
| # | diredp-number                      |            |            |           |        |
| # | diredp-rainbow-media-face          |            |            |           |        |
| # | diredp-rare-priv                   |            |            |           |        |
| # | diredp-read-priv                   |            |            |           |        |
| # | diredp-symlink                     |            |            |           |        |
| # | diredp-write-priv                  |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | elfeed-search-date-face            |            |            |           |        |
| # | elfeed-search-feed-face            |            |            |           |        |
| # | elfeed-search-tag-face             |            |            |           |        |
| # | elfeed-search-unread-title-face    |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | epe-dir-face                       |            |            |           |        |
| # | epe-remote-face                    |            |            |           |        |
| # | epe-symbol-face                    |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | erc-button                         |            |            |           |        |
| # | erc-current-nick-face              |            |            |           |        |
| # | erc-nick-default-face              |            |            |           |        |
| # | erc-notice-face                    |            |            |           |        |
| # | erc-prompt-face                    |            |            |           |        |
| # | erc-timestamp-face                 |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | eshell-ls-directory                |            |            |           |        |
| # | eshell-ls-executable               |            |            |           |        |
| # | eshell-ls-missing                  |            |            |           |        |
| # | eshell-ls-readonly                 |            |            |           |        |
| # | eshell-ls-special                  |            |            |           |        |
| # | eshell-ls-symlink                  |            |            |           |        |
| # | eshell-prompt                      |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | flx-highlight-face                 |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | flycheck-warning                   |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | git-commit-comment-file            |            |            |           |        |
| # | git-commit-comment-heading         |            |            |           |        |
| # | git-commit-summary                 |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | hackernews-comment-count-face      |            |            |           |        |
| # | hackernews-link-face               |            |            |           |        |
| # | hackernews-score-face              |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | hi-green-b                         |            |            |           |        |
| # | hi-red-b                           |            |            |           |        |
| # | hi-yellow                          |            |            |           |        |
| # | hi-yellow-b                        |            |            |           |        |
| # | highlight-quoted-symbol            |            |            |           |        |
| # | highlight-symbol-face              |            |            |           |        |
| # | hl-line                            |            |            |           |        |
| # | lazy-highlight                     |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | hydra-face-blue                    |            |            |           |        |
| # | hydra-face-red                     |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | ido-first-match                    |            |            |           |        |
| # | ido-only-match                     |            |            |           |        |
| # | ido-subdir                         |            |            |           |        |
| # | ido-vertical-match-face            |            |            |           |        |
| # | ido-virtual                        |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | isearch                            |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | ivy-action                         |            |            |           |        |
| # | ivy-confirm-face                   |            |            |           |        |
| # | ivy-current-match                  |            |            |           |        |
| # | ivy-cursor                         |            |            |           |        |
| # | ivy-highlight-face                 |            |            |           |        |
| # | ivy-minibuffer-match-face-1        |            |            |           |        |
| # | ivy-minibuffer-match-face-2        |            |            |           |        |
| # | ivy-minibuffer-match-face-3        |            |            |           |        |
| # | ivy-minibuffer-match-face-4        |            |            |           |        |
| # | ivy-prompt-match                   |            |            |           |        |
| # | ivy-remote                         |            |            |           |        |
| # | ivy-virtual                        |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | jabber-chat-prompt-foreign         |            |            |           |        |
| # | jabber-chat-prompt-local           |            |            |           |        |
| # | jabber-rare-time-face              |            |            |           |        |
| # | jabber-roster-user-away            |            |            |           |        |
| # | jabber-roster-user-offline         |            |            |           |        |
| # | jabber-roster-user-online          |            |            |           |        |
| # | jabber-roster-user-xa              |            |            |           |        |
| # | jabber-title-large                 |            |            |           |        |
| # | jabber-title-medium                |            |            |           |        |
| # | jabber-title-small                 |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | magit-blame-heading                |            |            |           |        |
| # | magit-diff-added                   |            |            |           |        |
| # | magit-diff-added-highlight         |            |            |           |        |
| # | magit-diff-context                 |            |            |           |        |
| # | magit-diff-context-highlight       |            |            |           |        |
| # | magit-diff-hunk-heading            |            |            |           |        |
| # | magit-diff-hunk-heading-highlight  |            |            |           |        |
| # | magit-diff-hunk-heading-highlight  |            |            |           |        |
| # | magit-diff-lines-boundary          |            |            |           |        |
| # | magit-diff-lines-heading           |            |            |           |        |
| # | magit-diff-lines-heading           |            |            |           |        |
| # | magit-diff-removed                 |            |            |           |        |
| # | magit-diff-removed-highlight       |            |            |           |        |
| # | magit-section-heading              |            |            |           |        |
| # | magit-section-highlight            |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | message-header-name                |            |            |           |        |
| # | message-header-other               |            |            |           |        |
| # | message-header-subject             |            |            |           |        |
| # | message-header-to                  |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | minibuffer-prompt                  |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | minimap-active-region-background   |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | monky-diff-add                     |            |            |           |        |
| # | monky-diff-del                     |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | org-agenda-calendar-event          |            |            |           |        |
| # | org-agenda-clocking                |            |            |           |        |
| # | org-agenda-current-time            |            |            |           |        |
| # | org-agenda-date                    |            |            |           |        |
| # | org-agenda-date-today              |            |            |           |        |
| # | org-agenda-date-weekend            |            |            |           |        |
| # | org-agenda-diary                   |            |            |           |        |
| # | org-agenda-dimmed-todo-face        |            |            |           |        |
| # | org-agenda-done                    |            |            |           |        |
| # | org-agenda-structure               |            |            |           |        |
| # | org-archived                       |            |            |           |        |
| # | org-block                          |            |            |           |        |
| # | org-block-begin-line               |            |            |           |        |
| # | org-block-end-line                 |            |            |           |        |
| # | org-checkbox-statistics-done       |            |            |           |        |
| # | org-checkbox-statistics-todo       |            |            |           |        |
| # | org-code                           |            |            |           |        |
| # | org-column                         |            |            |           |        |
| # | org-column-title                   |            |            |           |        |
| # | org-date                           |            |            |           |        |
| # | org-document-info                  |            |            |           |        |
| # | org-document-info-keyword          |            |            |           |        |
| # | org-document-title                 |            |            |           |        |
| # | org-done                           |            |            |           |        |
| # | org-ellipsis                       |            |            |           |        |
| # | org-footnote                       |            |            |           |        |
| # | org-formula                        |            |            |           |        |
| # | org-habit-alert-face               |            |            |           |        |
| # | org-habit-alert-future-face        |            |            |           |        |
| # | org-habit-clear-face               |            |            |           |        |
| # | org-habit-clear-future-face        |            |            |           |        |
| # | org-habit-overdue-face             |            |            |           |        |
| # | org-habit-overdue-future-face      |            |            |           |        |
| # | org-habit-ready-face               |            |            |           |        |
| # | org-habit-ready-future-face        |            |            |           |        |
| # | org-headline-done                  |            |            |           |        |
| # | org-hide                           |            |            |           |        |
| # | org-latex-and-related              |            |            |           |        |
| # | org-level-1                        |            |            |           |        |
| # | org-level-2                        |            |            |           |        |
| # | org-level-3                        |            |            |           |        |
| # | org-level-4                        |            |            |           |        |
| # | org-level-5                        |            |            |           |        |
| # | org-level-6                        |            |            |           |        |
| # | org-level-7                        |            |            |           |        |
| # | org-level-8                        |            |            |           |        |
| # | org-link                           |            |            |           |        |
| # | org-list-dt                        |            |            |           |        |
| # | org-meta-line                      |            |            |           |        |
| # | org-priority                       |            |            |           |        |
| # | org-quote                          |            |            |           |        |
| # | org-scheduled                      |            |            |           |        |
| # | org-scheduled-previously           |            |            |           |        |
| # | org-scheduled-today                |            |            |           |        |
| # | org-special-keyword                |            |            |           |        |
| # | org-table                          |            |            |           |        |
| # | org-tag                            |            |            |           |        |
| # | org-time-grid                      |            |            |           |        |
| # | org-todo                           |            |            |           |        |
| # | org-upcoming-deadline              |            |            |           |        |
| # | org-upcoming-distant-deadline      |            |            |           |        |
| # | org-verbatim                       |            |            |           |        |
| # | org-warning                        |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | perspeen-selected-face             |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | popup-face                         |            |            |           |        |
| # | popup-menu-mouse-face              |            |            |           |        |
| # | popup-menu-selection-face          |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | powerline-active1                  |            |            |           |        |
| # | powerline-active2                  |            |            |           |        |
| # | powerline-inactive1                |            |            |           |        |
| # | powerline-inactive2                |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | prodigy-green-face                 |            |            |           |        |
| # | prodigy-red-face                   |            |            |           |        |
| # | prodigy-yellow-face                |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | rainbow-delimiters-depth-1-face    |            |            |           |        |
| # | rainbow-delimiters-depth-10-face   |            |            |           |        |
| # | rainbow-delimiters-depth-2-face    |            |            |           |        |
| # | rainbow-delimiters-depth-3-face    |            |            |           |        |
| # | rainbow-delimiters-depth-4-face    |            |            |           |        |
| # | rainbow-delimiters-depth-5-face    |            |            |           |        |
| # | rainbow-delimiters-depth-6-face    |            |            |           |        |
| # | rainbow-delimiters-depth-7-face    |            |            |           |        |
| # | rainbow-delimiters-depth-8-face    |            |            |           |        |
| # | rainbow-delimiters-depth-9-face    |            |            |           |        |
|---+------------------------------------+------------+------------+-----------+--------|
| # | sqlplus-table-even-rows-face       |            |            |           |        |
| # | sqlplus-table-head-face            |            |            |           |        |
| # | sqlplus-table-odd-rows-face        |            |            |           |        |
| # | swiper-match-face-1                |            |            |           |        |
| # | swiper-match-face-2                |            |            |           |        |
| # | swiper-match-face-3                |            |            |           |        |
| # | swiper-match-face-4                |            |            |           |        |
| # | vc-annotate-face-3F3FFF            |            |            |           |        |
| # | vc-annotate-face-3FF3FF            |            |            |           |        |
| # | vc-annotate-face-3FFF56            |            |            |           |        |
| # | vc-annotate-face-56FF3F            |            |            |           |        |
| # | vc-annotate-face-FF3F3F            |            |            |           |        |
| # | vc-annotate-face-FFF33F            |            |            |           |        |
| # | vertical-border                    |            |            |           |        |
| # | wgrep-done-face                    |            |            |           |        |
| # | wgrep-face                         |            |            |           |        |
| # | wgrep-file-face                    |            |            |           |        |
| # | wgrep-reject-face                  |            |            |           |        |
| # | whitespace-empty                   |            |            |           |        |
| # | whitespace-hspace                  |            |            |           |        |
| # | whitespace-indentation             |            |            |           |        |
| # | whitespace-line                    |            |            |           |        |
| # | whitespace-newline                 |            |            |           |        |
| # | whitespace-space                   |            |            |           |        |
| # | whitespace-space-after-tab         |            |            |           |        |
| # | whitespace-tab                     |            |            |           |        |
| # | yas-field-highlight-face           |            |            |           |        |
##+TBLFM: $2='(build-face-highlight $Name $Foreground $Background $Underline)
* Devtools
#+BEGIN_SRC emacs-lisp :results silent
(use-package highlight
  :ensure t)

(defun load-colors ()
  (org-table-get-remote-range "Colors" "@2$1..@>$2")
  (mapcar (lambda (x) (apply 'cons x))
          (seq-partition
           (mapcar 'substring-no-properties colors) 2)))

(defun build-face-highlight (face &optional fg bg ul)
  (let* ((fg (s-trim fg))
         (bg (s-trim bg))
         (ul (s-trim ul))

         (face-name (format "%s--%s" "danneskjold-temp-face" face))
         (face-name-q (eval (read (format "(quote %s)" face-name))))
         (colors (load-colors))
         (spec (list (list t
                           :background (if (string-empty-p bg) "black" (or (alist-get bg colors nil nil 'string=) bg))
                           :foreground (if (string-empty-p fg) "white" (or (alist-get fg colors nil nil 'string=) fg))
                           :underline  (if (string-empty-p ul) nil     ul))))
         (doc "Face used to highlight examples.")
         (group ":group 'danneskjold-faces"))
j    (eval (car (read-from-string
                (format "(defface %s '%s \"%s\" %s)"
                        face-name (prin1-to-string spec) doc group))))
    (highlight-regexp face-name-q (intern face))
  face))
#+END_SRC
* Color Sources
** [[http://paletton.com/#uid=73E0u0k5MYN00++0R+XaxTye+Kt][Danneskjold Palette]]
** [[http://eclipsecolorthemes.org/?view=theme&id=1][Eclipse Colors]]
* Implementation
** Header
#+BEGIN_SRC emacs-lisp
;; danneskjold-theme.el --- beautiful high-contrast theme

;; Copyright (c) 2016-2018 Dmitry Akatov

;; Author: Dmitry Akatov <akatovda@yandex.com>
;; URL: https://github.com/rails-to-cosmos/
;; Package-Version: 2.0

;;; Commentary:

;;; Code:
#+END_SRC
** Theme Definition
#+BEGIN_SRC emacs-lisp
(deftheme danneskjold
  "Amazing. Beautiful. Contrast.")
#+END_SRC
** Autoloads
#+BEGIN_SRC emacs-lisp
;;;###autoload
(when load-file-name
  (add-to-list 'custom-theme-load-path
	       (file-name-as-directory (file-name-directory load-file-name))))
#+END_SRC
** Footer
#+BEGIN_SRC emacs-lisp
(provide-theme 'danneskjold)
;;; danneskjold-theme.el ends here
#+END_SRC
* Local Variables
# CONSTANTS: org-table-separator-space=" "
# Local Variables:
# firestarter: (org-babel-tangle)
# eval: (rainbow-mode)
# eval: (face-remap-add-relative 'org-table :foreground "#7B9ED2")
# eval: (face-remap-add-relative 'org-formula :foreground "#D0E1F9")
# End:
