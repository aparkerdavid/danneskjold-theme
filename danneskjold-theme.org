#+TITLE: danneskjold-theme
#+AUTHOR: Dmitry Akatov
#+EMAIL: akatovda@yandex.com
#+CATEGORY: danneskjold-theme

! list-colors-display

* Colors
#+TBLNAME: Colors
| Name        | HEX     | Description                                        |
|-------------+---------+----------------------------------------------------|
| black       | #000000 | Background                                         |
| white       | #FFFFFF | Use it to achieve maximum contrast with background |
| yellow      | #FFDB45 |                                                    |
| orange      | #FF9009 |                                                    |
| red         | #E74C3C |                                                    |
| violet      | #9C91E4 |                                                    |
| blue        | #4CB5F5 |                                                    |
| cyan        | #66D9EF |                                                    |
| green       | #B6E63E |                                                    |
| green-sat   | #53D253 |                                                    |
|-------------+---------+----------------------------------------------------|
| magnolias   | #FAF9FF |                                                    |
| wisteria    | #B2A9ED |                                                    |
| amethyst    | #8B7FD7 |                                                    |
| frost       | #D0E1F9 |                                                    |
| ghost       | #F9FBFF |                                                    |
| periwinkle  | #D8D2FA |                                                    |
| cornflower  | #A4C2EB |                                                    |
| habr        | #789ED2 |                                                    |
| lemoncream  | #FFF5D1 |                                                    |
| snowy       | #FFFEF8 |                                                    |
| sand        | #FFEEAB |                                                    |
| lightgolden | #FFE688 |                                                    |
| almond      | #FFEED1 |                                                    |
| niveous     | #FFFCF8 |                                                    |
| navajo      | #FFE0AB |                                                    |
| macheese    | #FFD288 |                                                    |
| diredcl     | #749AF7 |                                                    |
|-------------+---------+----------------------------------------------------|
| comment     | #A4C2EB |                                                    |
| invisible   | #7B9ED2 |                                                    |

* Faces
#+TBLNAME: Faces
| ! | Name             | Foreground | Background | Underline | Weight |
|---+------------------+------------+------------+-----------+--------|
| # | default          | white      | black      |           |        |
| # | fringe           | invisible  | black      |           |        |
| # | region           | black      | white      |           |        |
| # | menu             | white      | black      |           |        |
| # | button           | frost      |            | t         | normal |
| # | link             | frost      |            | t         |        |
|---+------------------+------------+------------+-----------+--------|
| # | show-paren-match | white      | black      |           |        |
| # | highlight        | black      | invisible  | t         |        |
#+TBLFM: $2='(build-face-highlight $Name $Foreground $Background $Underline)
* Devtools
#+BEGIN_SRC emacs-lisp :results silent
(use-package highlight
  :ensure t)

(defun build-face-highlight (face &optional fg bg ul)
  (let* ((fg (s-trim fg))
         (bg (s-trim bg))
         (ul (s-trim ul))

         (face-name (format "%s--%s" "danneskjold-temp-face" face))
         (face-name-q (eval (read (format "(quote %s)" face-name))))
         (colors (org-table-get-remote-range "Colors" "@2$1..@>$2"))
         (colors-alist (mapcar (lambda (x) (apply 'cons x))
                               (seq-partition
                                (mapcar 'substring-no-properties colors) 2)))
         (spec (list (list t
                           :background (if (string-empty-p bg) "black" (or (alist-get bg colors-alist nil nil 'string=) bg))
                           :foreground (if (string-empty-p fg) "white" (or (alist-get fg colors-alist nil nil 'string=) fg))
                           :underline  (if (string-empty-p ul) nil     ul))))
         (doc "Face used to highlight examples.")
         (group ":group 'danneskjold-faces"))
    (eval (car (read-from-string
                (format "(defface %s '%s \"%s\" %s)"
                        face-name (prin1-to-string spec) doc group))))
    (let ((start (point))
          (end (save-excursion (org-table-next-field) (point))))
      (face-spec-set face-name-q spec)
      (hlt-highlight-regexp-region start end face face-name-q))
  face))
#+END_SRC
* Color Sources
** [[http://paletton.com/#uid=73E0u0k5MYN00++0R+XaxTye+Kt][Danneskjold Palette]]
** [[http://eclipsecolorthemes.org/?view=theme&id=1][Eclipse Colors]]
* Implementation
** Header
#+BEGIN_SRC emacs-lisp
;; danneskjold-theme.el --- beautiful high-contrast theme

;; Copyright (c) 2016-2018 Dmitry Akatov

;; Author: Dmitry Akatov <akatovda@yandex.com>
;; URL: https://github.com/rails-to-cosmos/
;; Package-Version: 2.0

;;; Commentary:

;;; Code:
#+END_SRC
** Theme Definition
#+BEGIN_SRC emacs-lisp
(deftheme danneskjold
  "Amazing. Beautiful. Contrast.")
#+END_SRC
** Autoloads
#+BEGIN_SRC emacs-lisp
;;;###autoload
(when load-file-name
  (add-to-list 'custom-theme-load-path
	       (file-name-as-directory (file-name-directory load-file-name))))
#+END_SRC
** Footer
#+BEGIN_SRC emacs-lisp
(provide-theme 'danneskjold)
;;; danneskjold-theme.el ends here
#+END_SRC
* Local Variables
# CONSTANTS: org-table-separator-space=" "
# Local Variables:
# firestarter: (org-babel-tangle)
# eval: (rainbow-mode)
# eval: (face-remap-add-relative 'org-table :foreground "#7B9ED2")
# eval: (face-remap-add-relative 'org-formula :foreground "#D0E1F9")
# End:
